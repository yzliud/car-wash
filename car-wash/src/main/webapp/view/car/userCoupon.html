<!DOCTYPE html>
<!-- saved from url=(0016)https://weui.io/ -->
<html lang="zh-cmn-Hans"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>领取优惠卷</title>
    <link rel="stylesheet" href="${SPATH}/weui/weui.css">
    <link rel="stylesheet" href="${SPATH}/weui/example.css">
    <link rel="stylesheet" href="${SPATH}/layer.mobile-v2.0/layer_mobile/need/layer.css">
</head>
 <body>
 <div>
    <div class="page__bd">

        <div class="weui-cells weui-cells_form">
            <div class="weui-cell">
                <div class="weui-cell__hd">
                	<label class="weui-label">优惠卷号码</label>
                </div>
                <div class="weui-cell__bd">
                    <input class="weui-input" id="couponNo" name="couponNo" value="" type="text" placeholder="请输入优惠券号"/>
                </div>
            </div>
        </div>
        
        <div class="weui-btn-area">
            <a class="weui-btn weui-btn_primary" href="javascript:update();" id="showTooltips">提交</a>
        </div>
    </div>
</div>
<script src="${SPATH}/weui/zepto.min.js"></script>
<script type="text/javascript" src="${SPATH}/weui/jweixin-1.0.0.js"></script>
<script src="${SPATH}/weui/weui.min.js"></script>
<script src="${SPATH}/weui/example.js"></script>
<script src="${SPATH}/layer.mobile-v2.0/layer_mobile/layer.js"></script>

<script>
function update(){
	var couponNo = $("#couponNo").val().toUpperCase();
	if(couponNo == "请输入优惠券号" || couponNo == "") {
		layer.open({
			content: '请输入优惠卷号码',
			skin: 'msg',
			time: 2
		});
	} else {
		$.ajax({
	        url:"${CPATH}/car/coupon/receiveCoupon",
	        data:{
	        	"couponNo": $("#couponNo").val()
	        },
	        type:"post",
	        async: false,
	        dataType: 'json',
	        success:function(data){//ajax返回的数据
	       		 
	       		if(data.rtnCode==0){
           			layer.open({
           				content: data.rtnMsg,
           				skin: 'msg',
           				time: 2,
           				end: function(){
           					window.location.href = "${CPATH}/car/member/forwardUserCenter";
           				  }
           			});
           	 	}else{
    	       	 	layer.open({
    	    			content: data.rtnMsg,
    	    			skin: 'msg',
    	    			time: 2
    	    		});
           	 	}
	        }
	   }); 
	}
}

function check_car_name(car_name) {
	var re = /^[\u4e00-\u9fa5]{1}[A-Z]{1}[A-Z_0-9]{5}$/;
	if(car_name.search(re) == -1) {
		return false;
	} else {
		return true;
	}
}
</script>

 </body>
</html>